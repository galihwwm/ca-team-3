(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{3383:function(e,t,a){Promise.resolve().then(a.bind(a,4332))},4332:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var l=a(7437),s=a(2265),r=a(9376),n=a(7970);function i(){let[e,t]=(0,s.useState)("CHATBOT"),[a,i]=(0,s.useState)(null),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[g,j]=(0,s.useState)([]),[v,N]=(0,s.useState)("eva123"),[w,y]=(0,s.useState)(!1),T=(0,r.useRouter)(),E=async()=>{if(!a)return alert("Silakan upload dokumen");if(!e)return alert("Mode tidak boleh kosong");p(!0);try{let l=new FormData;if(l.append("token",v||"dev123"),l.append("mode",e),l.append("file",a),"CHATBOT"===e){if(!c){alert("Input chatbot tidak boleh kosong"),p(!1);return}l.append("input_text",c)}else if("REPORT"===e){if(!m){alert("Pilih ASE family terlebih dahulu"),p(!1);return}l.append("ase_family",m)}let s=await fetch("https://ca-team-datathon-706234693396.us-central1.run.app/evaluate",{method:"POST",body:l}),r=await s.json();if(r.error)alert("Gagal: "+r.error);else{if(alert("Sukses!"),r.report_path){let e="https://ca-team-datathon-706234693396.us-central1.run.app/"+r.report_path.replace(/^\/??/,"");o(e)}if("REPORT"===e&&r.results)j(r.results);else if("CHATBOT"===e){if(Array.isArray(r.response)){var t;f((null===(t=r.response[0])||void 0===t?void 0:t.response)||"")}else r.response&&f(r.response)}}}catch(e){console.error(e),alert("Gagal memproses file.")}finally{p(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row bg-white text-gray-800",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center px-10 py-6 relative",children:[(0,l.jsxs)("div",{className:"max-w-lg w-full text-center",children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-blue-800 mb-2 uppercase",children:"Evaluasi Dokumen Lebih Cerdas, Lebih Cepat"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload dokumen Security Target dan dapatkan evaluasi berbasis AI."}),(0,l.jsxs)("div",{className:"border-2 border-blue-300 rounded-xl p-8 bg-blue-50 shadow-inner",children:[(0,l.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("img",{src:"/upload-icon.png",className:"w-16 h-16 mb-4",alt:"Upload Icon"}),(0,l.jsx)("p",{className:"font-semibold text-gray-700",children:"Drag & drop file di sini"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"atau klik untuk upload"})]}),(0,l.jsx)("input",{id:"file-upload",type:"file",className:"hidden",onChange:e=>{let t=e.target.files[0];t?(i(t),y(!0)):y(!1),o(""),f(""),j([])}})]}),w&&(0,l.jsxs)("p",{className:"mt-4 text-green-600 text-sm font-medium text-center",children:["File berhasil di-upload: ",(0,l.jsx)("span",{className:"font-semibold",children:null==a?void 0:a.name})]})]}),"REPORT"===e&&g.length>0&&(0,l.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-700",children:"Evaluation Result:"}),g.map((e,t)=>(0,l.jsxs)("div",{className:"p-4 border border-blue-200 rounded-lg bg-white shadow text-justify",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,l.jsx)("strong",{children:"Work Unit:"})," ",e.workunit]}),(0,l.jsx)("div",{className:"text-sm text-gray-800 mt-2 whitespace-pre-line",dangerouslySetInnerHTML:{__html:n.TU.parse(e.evaluation)}})]},t)),d&&(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)("a",{href:d,download:!0,className:"inline-block bg-green-600 text-white px-5 py-2 rounded hover:bg-green-700 transition",children:"Download Report (.docx)"})})]})]}),(0,l.jsx)("div",{className:"absolute bottom-0 left-10 text-left",children:(0,l.jsx)("img",{src:"/c-gen(2).png",className:"w-48 mb-2",alt:"Logo CA-GEN"})})]}),(0,l.jsxs)("div",{className:"w-full md:w-80 bg-blue-50 border-t md:border-t-0 md:border-l border-blue-200 flex flex-col justify-between p-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-white bg-blue-800 text-center py-3 rounded text-lg font-bold mb-4",children:"EVALUATOR PAGE"}),(0,l.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md text-center mb-6",children:(0,l.jsx)("img",{src:"/avatar.png",className:"w-20 h-20 mx-auto rounded-full shadow mb-2",alt:"Avatar"})}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Fitur Evaluator"}),(0,l.jsxs)("select",{className:"w-full py-2 px-3 border border-gray-300 rounded text-sm",value:e,onChange:e=>{t(e.target.value),u(""),x(""),f(""),j([])},children:[(0,l.jsx)("option",{value:"CHATBOT",children:"Chatbot"}),(0,l.jsx)("option",{value:"REPORT",children:"Evaluation Report"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-2 text-blue-700 text-center",children:"CHATBOT"===e?"Input Query":"Pilih Kategori Family"}),"CHATBOT"===e&&(0,l.jsx)("textarea",{placeholder:"Enter your evaluation query",className:"px-3 py-2 border rounded text-sm w-full h-28 resize-none",value:c,onChange:e=>u(e.target.value)}),"REPORT"===e&&(0,l.jsxs)("select",{className:"px-3 py-2 border rounded text-sm w-full",value:m,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- Pilih Rekomendasi --"}),["ASE_INT.1","ASE_INT.2","ASE_CCL.1","ASE_CCL.2","ASE_OBJ.1","ASE_OBJ.2","ASE_REQ.1","ASE_REQ.2","ASE_SPD.1","ASE_SPD.2","ASE_TSS.1","ASE_TSS.2"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsx)("button",{onClick:E,disabled:h||"CHATBOT"===e&&!c||"REPORT"===e&&!m,className:"w-full py-2 rounded font-semibold transition text-white ".concat(!h&&("CHATBOT"!==e||c)&&("REPORT"!==e||m)?"bg-blue-700 hover:bg-blue-800":"bg-gray-300 cursor-not-allowed"),children:h?"Processing...":"CHATBOT"===e?"ENTER":"GENERATE"}),"CHATBOT"===e&&b&&(0,l.jsxs)("div",{className:"mt-4 bg-white p-4 rounded-lg shadow-md text-sm text-gray-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-700 mb-2 text-center",children:"CA-Gen"}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:b})]})]}),(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)("button",{onClick:()=>T.push("/"),className:"bg-gray-800 hover:bg-gray-900 text-white py-2 rounded w-full",children:"LOGOUT"})})]})]})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=3383)}),_N_E=e.O()}]);