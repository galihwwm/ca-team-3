(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{2083:function(e,t,s){Promise.resolve().then(s.bind(s,8445))},8445:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var l=s(7437),a=s(2265),r=s(9376),n=s(7970);function i(){let[e,t]=(0,a.useState)("CHATBOT"),[s,i]=(0,a.useState)(null),[d,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(""),[f,j]=(0,a.useState)([]),[N,v]=(0,a.useState)(!1),[w,y]=(0,a.useState)("dev123"),T=(0,r.useRouter)(),E=async()=>{if(!s)return alert("Silakan upload dokumen");if(!e)return alert("Mode tidak boleh kosong");p(!0);try{let l=new FormData;if(l.append("token",w),l.append("mode",e),l.append("file",s),"CHATBOT"===e){if(!c){alert("Input chatbot tidak boleh kosong"),p(!1);return}l.append("input_text",c)}if("REPORT"===e){if(!m){alert("Pilih kategori family terlebih dahulu"),p(!1);return}l.append("ase_family",m)}let a=await fetch("https://ca-team-datathon-706234693396.us-central1.run.app/evaluate",{method:"POST",body:l}),r=await a.json();if(r.error)alert("Gagal: "+r.error);else{if(alert("Sukses!"),r.report_path){let e="https://ca-team-datathon-706234693396.us-central1.run.app/"+r.report_path.replace(/^\/??/,"");o(e)}if("REPORT"===e&&r.results)j(r.results);else if("CHATBOT"===e){var t;let e=Array.isArray(r.response)?(null===(t=r.response[0])||void 0===t?void 0:t.response)||"":r.response||"";g(e)}}}catch(e){console.error(e),alert("Gagal memproses file.")}finally{p(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row bg-white text-gray-800",children:[(0,l.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center px-10 py-6 relative",children:(0,l.jsxs)("div",{className:"max-w-lg w-full text-center",children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-blue-800 mb-2 uppercase",children:"Rekomendasi Lebih Cerdas, Lebih Cepat"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload draf Security Target dan dapatkan Rekomendasi berbasis AI"}),(0,l.jsxs)("div",{className:"border-2 border-blue-300 rounded-xl p-8 bg-blue-50 shadow-inner",children:[(0,l.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("img",{src:"/upload-icon.png",className:"w-16 h-16 mb-4",alt:"Upload Icon"}),(0,l.jsx)("p",{className:"font-semibold text-gray-700",children:"Drag & drop file di sini"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"atau klik untuk upload"})]}),(0,l.jsx)("input",{id:"file-upload",type:"file",className:"hidden",onChange:e=>{let t=e.target.files[0];i(t||null),v(!!t),o(""),g(""),j([])}})]}),N&&(0,l.jsxs)("p",{className:"mt-4 text-green-600 text-sm font-medium text-center",children:["File berhasil di-upload: ",(0,l.jsx)("span",{className:"font-semibold",children:null==s?void 0:s.name})]})]}),"REPORT"===e&&f.length>0&&(0,l.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-700",children:"Developer Guidance"}),f.map((e,t)=>(0,l.jsx)("div",{className:"p-4 border border-blue-200 rounded-lg bg-white shadow text-justify space-y-2",children:e.workunit?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,l.jsx)("strong",{children:"Work Unit"})," ",e.workunit]}),(0,l.jsxs)("p",{className:"text-sm text-gray-800 whitespace-pre-line",children:[(0,l.jsx)("strong",{children:"Evaluation"})," ",e.evaluation]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,l.jsx)("strong",{children:"Work Unit"})," ",e.developer_action]}),(0,l.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-line leading-relaxed [&_strong]:block [&_strong]:mt-3",dangerouslySetInnerHTML:{__html:n.TU.parse(e.guidance||"").replace(/:/g,"")}})]})},t)),d&&(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)("a",{href:d,download:!0,className:"inline-block bg-green-600 text-white px-5 py-2 rounded hover:bg-green-700 transition",children:"Download Report (.docx)"})})]}),(0,l.jsx)("div",{className:"absolute bottom-0 left-10 text-left",children:(0,l.jsx)("img",{src:"/c-gen(2).png",className:"w-48 mb-2",alt:"Logo CA-GEN"})})]})}),(0,l.jsxs)("div",{className:"w-full md:w-80 bg-blue-50 border-t md:border-t-0 md:border-l border-blue-200 flex flex-col justify-between p-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-white bg-blue-800 text-center py-3 rounded text-lg font-bold mb-4",children:"DEVELOPER PAGE"}),(0,l.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md text-center mb-6",children:(0,l.jsx)("img",{src:"/dev2.png",className:"w-20 h-20 mx-auto rounded-full shadow mb-2",alt:"Avatar"})}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Fitur Developer"}),(0,l.jsxs)("select",{className:"w-full py-2 px-3 border border-gray-300 rounded text-sm",value:e,onChange:e=>{t(e.target.value),u(""),x(""),g(""),j([])},children:[(0,l.jsx)("option",{value:"CHATBOT",children:"Chatbot"}),(0,l.jsx)("option",{value:"REPORT",children:"Guidance Report"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold mb-2 text-blue-700 text-center",children:"CHATBOT"===e?"Input Query":"Pilih Kategori Family"}),"CHATBOT"===e?(0,l.jsx)("textarea",{placeholder:"Enter your evaluation query",className:"px-3 py-2 border rounded text-sm w-full h-28 resize-none",value:c,onChange:e=>u(e.target.value)}):(0,l.jsxs)("select",{className:"px-3 py-2 border rounded text-sm w-full",value:m,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- Pilih Report --"}),["ASE_INT.1","ASE_INT.2","ASE_CCL.1","ASE_CCL.2","ASE_OBJ.1","ASE_OBJ.2","ASE_REQ.1","ASE_REQ.2","ASE_SPD.1","ASE_SPD.2","ASE_TSS.1","ASE_TSS.2"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsx)("button",{onClick:E,disabled:h||"CHATBOT"===e&&!c||"REPORT"===e&&!m,className:"w-full py-2 rounded font-semibold transition text-white ".concat(!h&&("CHATBOT"!==e||c)&&("REPORT"!==e||m)?"bg-blue-700 hover:bg-blue-800":"bg-gray-300 cursor-not-allowed"),children:h?"Processing...":"CHATBOT"===e?"ENTER":"GENERATE"}),"CHATBOT"===e&&b&&(0,l.jsxs)("div",{className:"mt-4 bg-white p-4 rounded-lg shadow-md text-sm text-gray-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-700 mb-2 text-center",children:"CA-Gen"}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:b})]})]}),(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)("button",{onClick:()=>T.push("/"),className:"bg-gray-800 hover:bg-gray-900 text-white py-2 rounded w-full",children:"LOGOUT"})})]})]})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=2083)}),_N_E=e.O()}]);